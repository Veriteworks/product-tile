<?php
/** @var MageSuite\ProductTile\Block\Tile\Fragment\Review $viewModel */
$viewModel = $block->getViewModel();
$product = $block->getProduct();

$maxStars = 5;
$activeStars = $viewModel->getActiveStars($product);
$reviewsCount = $viewModel->getReviewsCount($product);
?>

<?php if ($activeStars): ?>
    <div class="cs-star-rating">
        <span class="cs-star-rating__stars">
            <?php for ($i = 0; $i < $maxStars; $i++): ?>
                <?php if ($i < $activeStars and $i + 1 > $activeStars): ?>
                    <i class="cs-star-rating__star cs-star-rating__star--half-active"></i>
                <?php elseif ($i < $activeStars): ?>
                    <i class="cs-star-rating__star cs-star-rating__star--active"></i>
                <?php else: ?>
                    <i class="cs-star-rating__star"></i>
                <?php endif; ?>
            <?php endfor; ?>
        </span>
        <?php  if ($reviewsCount > 0): ?>
            <span class="cs-star-rating__text">(<?= $reviewsCount ?>)</span>
        <?php endif; ?>
    </div>
<?php endif; ?>